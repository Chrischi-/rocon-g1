"use strict";var _=require("underscore"),assert=require("assert"),async=require("async"),moment=require("moment"),ParameterExporter=function(a,b,c){assert(c),this._canFacade=a,this._parameterRepository=b,this._valueCache=c,_.bindAll(this)};ParameterExporter.prototype.exportAll=function(a){a(null,this._valueCache.getAll())},ParameterExporter.prototype.importAll=function(a,b,c){var d=this;a["HG1.cJAHR"]=moment(b).format("YY"),a["HG1.cMONAT"]=moment(b).format("M"),a["HG1.cTAG"]=moment(b).format("D"),a["HG1.cSTUNDE"]=moment(b).format("h"),a["HG1.cMINUTE"]=moment(b).format("m"),async.each(_.keys(a),function(c,e){var f=c.split("."),g=f[0],h=f[1],i=a[c];i="cJAHR"==h?moment(b).format("YY"):i,i="cMONAT"==h?moment(b).format("M"):i,i="cTAG"==h?moment(b).format("D"):i,i="cSTUNDE"==h?moment(b).format("H"):i,i="cMINUTE"==h?moment(b).format("m"):i,console.log(g,h,i),d["import"](g,h,i,e)},c)},ParameterExporter.prototype["import"]=function(a,b,c,d){var e=this._parameterRepository.findOneBy({device:a,name:b,writeable:!0});e&&null!==c?this._canFacade.send(e,c,function(a,b){console.log(e.device,e.name,b),d()}):d()},module.exports=ParameterExporter;