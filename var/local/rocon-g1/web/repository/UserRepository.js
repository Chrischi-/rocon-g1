var _=require("underscore"),assert=require("assert"),UserRepository=function(a){assert(a),this.dataHandler=a,this.data=a.read("user"),_.bindAll(this)};UserRepository.prototype.findOneByUsername=function(a,b){var c=_.find(this.data,function(b){return b.username==a});return c?b(null,c):b("web.user.notFound",null)},UserRepository.prototype.updateUser=function(a,b){this.data[a.username]=a,this.dataHandler.write("user",this.data,function(a){b(a)})},module.exports=UserRepository;