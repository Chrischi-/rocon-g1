var _=require("underscore"),StatusController=function(a,b){_.bindAll(this),this._valueCache=a,this._parameterRepository=b};StatusController.prototype.list=function(a,b){var c=a.params.device,d={};-1!=c.indexOf("water")&&(d.dhwTemperature=this._getValue("HG1","cSPEICHERISTTEMP",null)),-1!=c.indexOf("HC")&&(d.roomTemperature=this._getValue(c,"cRAUMISTTEMP",null)),-1!=c.indexOf("direct")&&(d.outsideTemperature=this._getValue("HG1","cAUSSENTEMP",null),d.boilerTemperature=this._getValue("HG1","cKESSELISTTEMP",null)),d.error=this._getValue(c,"cFEHLER_AKTUELL",0),b.json(d)},StatusController.prototype._getValue=function(a,b,c){var d=this._parameterRepository.findOneBy({device:a,name:b});return d?this._valueCache.get(d,c):c},module.exports=StatusController;